import pandas as pd
from backend import process_discount_rate

# ---- Mock input dataframe (like "CoE rates.xlsx") ----
data = {
    "Entity": ["", "", "Entity", "", ""],
    "Group": ["", "", "CoE LCY", "", ""],
    "IWPB": ["", "", "", "CoE LCY", ""],
    "CIB": ["", "", "", "", "CoE LCY"],
    "CC": ["", "", "", "", ""],
    "HBME - United Arab Emirates": ["", "", 0.05, 0.06, 0.07],
}
df = pd.DataFrame(data)

# ---- Mock user_input dataframe (like "user_input.xlsx") ----
user_input_data = {
    "Field": [
        "entity",
        "look_ahead",
        "testing_date",
        "current_year",
        "TOR",
        "cgu_rollup",
        "exclude_cgu_fcfe",
        "treat_current_year_as_historic",
        "CET1_required (in decimal)",
    ],
    "Value": [
        "5300_1GRT - HSBC Bank Middle East",
        7,
        "5/31/2025",
        2025,
        1,
        "Total=CIB+IWPB+CC",
        "CC",
        "N",
        0.1017,
    ],
}
user_input_df = pd.DataFrame(user_input_data)

# ---- Run the processing function ----
result = process_discount_rate(df, user_input_df)

print("Output dictionary:")
print(result)
